openapi: 3.0.0
info:
  title: LoginID API 
  description: LoginID documentation 
  version: 1.0.0
  # Contact information: name, email, URL.
  contact:
    name: LoginID Support
    email: support@loginid.io
    url: https://loginid.io
  # Name of the license and a URL to the license description.
  license:
    name: LoginID
    url: https://loginid.io
paths:
  # OpenAPI documents all need a paths element
  /manage/user:
    get:
      summary: Get user information and list of credentials 
      parameters:
        - in: query 
          name: username
          description: Username of user to be query
          required: true
          schema:
            type: string
        - in: query
          name: nid
          description: Namespace ID of user organization
          required: true
          schema:
            type: string    
      responses:
        '200':
          description: Return user entity object  
          content:
            application/json:    
              schema:
                type: object
                properties:
                  id: 
                    type: string
                    example: 2bb131a2-070f-4fd6-9faf-85e9aa993fa0
                  status:
                    type: string
                    example: active
                  created:
                    type: integer 
                    example:   12341341412  
                  credentials: 
                    type: array
                    items: 
                      type: object
                      properties: 
                        id:
                          type: string
                          example: 9449b8bb-e7a4-4e76-8d20-1c0c732c6b7f
                        desc:
                          type: string
                          example: Android Samsung s9
        '4XX':
          description: Error returns from application related problem
          content:
            application/json:    
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Username not found 
        '5XX':
          description: Error returns from system related problem 
          content:
            application/json:    
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Internal server error 
  /manage/user/status:
    post:
      summary: Update user status 
      requestBody:
        description: Parameters to update user status of an Namespace ID organization 
        required: true
        content:
          application/json:
            schema:  
              type: object
              properties:
                nid:
                  type: string
                  description: Namespace ID of a client organization
                username:
                  type: string
                  description: User identifier  
                status:
                  type: string
                  description: inactive   
      responses:
        '200':
          description: Return user entity object  
          content:
            application/json:    
              schema:
                type: object
                properties:
                  id: 
                    type: string
                    example: 2bb131a2-070f-4fd6-9faf-85e9aa993fa0
                  status:
                    type: string
                    example: active
                  created:
                    type: integer 
                    example:   12341341412  
        '4XX':
          description: Error returns from application related problem
          content:
            application/json:    
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Username not found 
        '5XX':
          description: Error returns from system related problem 
          content:
            application/json:    
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Internal server error
  /manage/user/credential:
    delete:
      summary: Remove a user credential 
      requestBody:
        description: Parameters to update user status of an Namespace ID organization 
        required: true
        content:
          application/json:
            schema:  
              type: object
              properties:
                nid:
                  type: string
                  description: Namespace ID of a client organization
                username:
                  type: string
                  description: User name identifier  
                credential:
                  type: string
                  description: User credential identifier  
      responses:
        '200':
          description: Return credential status  
          content:
            application/json:    
              schema:
                type: object
                properties:
                  id: 
                    type: string
                    example: 2bb131a2-070f-4fd6-9faf-85e9aa993fa0
        '4XX':
          description: Error returns from application related problem
          content:
            application/json:    
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Username not found 
        '5XX':
          description: Error returns from system related problem 
          content:
            application/json:    
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Internal server error 
  /fido/user/add-credential/init:
    post:
      summary: Front-end api call - Adding new user FIDO credential init phase 
      requestBody:
        description: Parameters to initialize credential creation challenge
        required: true
        content:
          application/json:
            schema:  
              type: object
              properties:
                nid:
                  type: string
                  description: Namespace ID of a client organization
                clientid:
                  type: string
                  description: Client ID is identifier for integration type - direct , mobile
                username:
                  type: string
                  description: User name identifier  
      responses:
        '200':
          description: Return FIDO webauthn creation option  
          content:
            application/json:    
              schema:
                type: object
                properties:
                  challenge: 
                    type: string
                    example: 2bb131a2-070f-4fd6-9faf-85e9aa993fa0
        '4XX':
          description: Error returns from application related problem
          content:
            application/json:    
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Username not found 
        '5XX':
          description: Error returns from system related problem 
          content:
            application/json:    
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Internal server error 
# 1) Define the security scheme type (HTTP bearer)
components:
  securitySchemes:
    bearerAuth:            # arbitrary name for the security scheme
      type: http
      scheme: bearer
      bearerFormat: JWT    # optional, arbitrary value for documentation purposes
# 2) Apply the security globally to all operations
security:
  - bearerAuth: []         # use the same name as above       